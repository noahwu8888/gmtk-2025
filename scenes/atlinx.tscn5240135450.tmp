[gd_scene load_steps=18 format=4 uid="uid://t6jjkf7w2aip"]

[ext_resource type="PackedScene" uid="uid://bbkdkp0428yji" path="res://prefabs/player.tscn" id="1_38yu2"]
[ext_resource type="Script" uid="uid://bwhkujh3jeruh" path="res://scripts/world.gd" id="1_iroee"]
[ext_resource type="PackedScene" uid="uid://cy7fb0f5jqp4x" path="res://prefabs/room.tscn" id="3_ijuib"]
[ext_resource type="Script" uid="uid://boimiilxj3n2b" path="res://addons/cameraregion2d/CameraRegionController2D.gd" id="3_q1qbj"]
[ext_resource type="Script" uid="uid://dc1got8i8eqpe" path="res://scripts/level_manager.gd" id="4_q1qbj"]
[ext_resource type="Script" uid="uid://dqi2pls0xboqr" path="res://addons/rhythm_notifier/rhythm_notifier.gd" id="5_b7oqo"]
[ext_resource type="PackedScene" uid="uid://dktcdyv405i1p" path="res://prefabs/loop_bar.tscn" id="5_nswv7"]
[ext_resource type="AudioStream" uid="uid://2p0ujxmu6fam" path="res://assets/music/level_1/bg1.mp3" id="5_pe0l7"]
[ext_resource type="Script" uid="uid://drr3hic848gx0" path="res://scripts/level.gd" id="7_6ovhn"]
[ext_resource type="PackedScene" uid="uid://but84a2ah4oj8" path="res://prefabs/rooms/room_1.tscn" id="7_w5gp6"]
[ext_resource type="Script" uid="uid://d4br6gobtni3t" path="res://scripts/music_control/bg_music_manager.gd" id="8_r4ahd"]
[ext_resource type="AudioStream" uid="uid://djrtk0k21pep2" path="res://assets/music/level_1/bg3.mp3" id="9_6ovhn"]
[ext_resource type="Script" uid="uid://q4owhci408e2" path="res://scripts/music_control/bg_music_emitter.gd" id="11_m07vp"]
[ext_resource type="AudioStream" uid="uid://cvoju3lrgidp" path="res://assets/music/level_1/bg2.mp3" id="12_w5gp6"]
[ext_resource type="AudioStream" uid="uid://4h25ywrkro2p" path="res://assets/music/level_1/bg4.mp3" id="13_ksotl"]

[sub_resource type="PackedScene" id="PackedScene_m07vp"]
_bundled = {
"base_scene": 0,
"conn_count": 0,
"conns": PackedInt32Array(),
"editable_instances": [],
"names": PackedStringArray("Room1", "MainLayer", "tile_map_data"),
"node_count": 2,
"node_paths": [NodePath(".")],
"nodes": PackedInt32Array(-1, -1, 2147483647, 0, -1, 0, 0, 1073741824, -1, 2147483647, 786433, -1, 1, 2, 1, 0),
"variants": [ExtResource("3_ijuib"), PackedByteArray("AAAlAP3/AQAAAAAAAQAAAAAAAAABAAMAAAABAAAAAAACAAMAAAAEAAAAAAADAAMAAAADAAAAAAACAAMAAAACAAAAAAACAAMAAAAGAAIAAAABAAMAAAAIAAIAAAACAAMAAAAHAAIAAAACAAMAAAAKAAIAAAACAAMAAAAJAAIAAAACAAMAAAALAAIAAAADAAMAAAAgAP7/AAABAAMAAAAhAP7/AAACAAMAAAAkAP7/AAACAAMAAAAjAP7/AAACAAMAAAAiAP7/AAACAAMAAAAmAP7/AAADAAMAAAAlAP7/AAACAAMAAAAdAAAAAAADAAMAAAAcAAAAAAACAAMAAAAaAAAAAAACAAMAAAAbAAAAAAACAAMAAAAZAAAAAAACAAMAAAAYAAAAAAACAAMAAAAXAAAAAAABAAMAAAAPAAQAAAACAAMAAAAOAAQAAAACAAMAAAANAAQAAAABAAMAAAASAP3/AAACAAMAAAARAP3/AAABAAMAAAATAP3/AAACAAMAAAAUAP3/AAADAAMAAAAQAAQAAAADAAMAAAA=")],
"version": 3
}

[sub_resource type="Resource" id="Resource_m07vp"]
script = ExtResource("7_6ovhn")
name = "Level 1"
room_prefabs = Array[PackedScene]([ExtResource("7_w5gp6"), SubResource("PackedScene_m07vp")])
metadata/_custom_type_script = "uid://drr3hic848gx0"

[node name="Atlinx" type="Node2D"]

[node name="World" type="Node2D" parent="."]
script = ExtResource("1_iroee")
metadata/_custom_type_script = "uid://bwhkujh3jeruh"

[node name="Player" parent="World" instance=ExtResource("1_38yu2")]
position = Vector2(384, 2176)

[node name="Room" parent="World" instance=ExtResource("3_ijuib")]

[node name="CameraRegionController2D" type="Node2D" parent="." node_paths=PackedStringArray("camera", "target_node")]
script = ExtResource("3_q1qbj")
camera = NodePath("../Camera2D")
target_node = NodePath("../World/Player")
metadata/_custom_type_script = "uid://boimiilxj3n2b"

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(0.05, 0.05)

[node name="LoopBar" parent="." node_paths=PackedStringArray("rhythm_notifier") instance=ExtResource("5_nswv7")]
rhythm_notifier = NodePath("../RhythmNotifier")

[node name="LevelManager" type="Node" parent="." node_paths=PackedStringArray("camera_region_controller", "loop_bar", "player", "world", "rhythm_notifier")]
script = ExtResource("4_q1qbj")
camera_region_controller = NodePath("../CameraRegionController2D")
loop_bar = NodePath("../LoopBar")
player = NodePath("../World/Player")
level = SubResource("Resource_m07vp")
world = NodePath("../World")
rhythm_notifier = NodePath("../RhythmNotifier")
min_transition_duration = 0.5

[node name="RhythmNotifier" type="Node" parent="."]
script = ExtResource("5_b7oqo")
running = true
metadata/_custom_type_script = "uid://dqi2pls0xboqr"

[node name="BackgroundManager" type="Node" parent="."]
script = ExtResource("8_r4ahd")

[node name="BGMusicEmitter1" type="AudioStreamPlayer" parent="BackgroundManager"]
stream = ExtResource("5_pe0l7")
script = ExtResource("11_m07vp")
metadata/_custom_type_script = "uid://q4owhci408e2"

[node name="BGMusicEmitter2" type="AudioStreamPlayer" parent="BackgroundManager"]
stream = ExtResource("12_w5gp6")
script = ExtResource("11_m07vp")
metadata/_custom_type_script = "uid://q4owhci408e2"

[node name="BGMusicEmitter3" type="AudioStreamPlayer" parent="BackgroundManager"]
stream = ExtResource("9_6ovhn")
script = ExtResource("11_m07vp")
metadata/_custom_type_script = "uid://q4owhci408e2"

[node name="BGMusicEmitter4" type="AudioStreamPlayer" parent="BackgroundManager"]
stream = ExtResource("13_ksotl")
script = ExtResource("11_m07vp")
metadata/_custom_type_script = "uid://q4owhci408e2"
